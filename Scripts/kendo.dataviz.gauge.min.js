/*
* Kendo UI Complete v2012.1.327 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at http://kendoui.com/complete-license
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(a,b){var c=document,d=a.extend,e=a.map,f=Math,g=window.kendo,h=g.Class,i=g.ui.Widget,j=g.deepExtend,k=g.dataviz,l=k.Axis,m=k.Box2D,n=k.ChartElement,o=k.NumericAxis,p=k.Ring,q=k.RootElement,r=k.RotationAnimation,s=k.BarIndicatorAnimatin,t=k.ArrowAnimation,u=k.append,v=k.animationDecorator,w=k.autoMajorUnit,x=k.getSpacing,y=k.defined,z=k.rotatePoint,A=k.Point2D,B=k.round,C=k.uniqueId,D=150,E="arrow",F="arrowPointer",G="barIndicator",H="#000",I=.05,J=k.COORD_PRECISION,K=Number.MAX_VALUE,L=-Number.MAX_VALUE,M=200,N=.5,O=200,P=60,Q=60,R=f.PI/180,S="inside",T="needle",U="outside",V="radialPointer",W=90,X="vertical",Y=n.extend({init:function(a,b){var c=this,d=a.options;n.fn.init.call(c,b),b=c.options,b.id||(b.id=C()),b.fill=b.color,c.scale=a,b.value=f.min(f.max(b.value,d.min),d.max)},options:{color:H,value:0},value:function(a){var b=this,c=b.options,d=c.value,e=b.scale.options,g;if(arguments.length===0)return d;c._oldValue=c.value,c.value=f.min(f.max(a,e.min),e.max),b.repaint()}}),Z=Y.extend({options:{shape:T,cap:{size:I},animation:{type:V,speed:D}},reflow:function(){var a=this,b=a.options,c=a.scale,d=c.ring,e=d.c,f=d.r*b.cap.size;a.box=new m(e.x-f,e.y-f,e.x+f,e.y+f)},repaint:function(){var a=this,b=a.scale,d=a.options,e=a.elements[0],g=d.animation,h=e.options.rotation[0],i=b.getSlotAngle(b.options.min),k=e.options.rotation[0]=b.getSlotAngle(d.value)-i,l=b.getSlotAngle(d._oldValue)-i,m=e._animation;m&&m.abort(),g===!1?e.refresh(c.getElementById(d.id)):(m=e._animation=new r(e,j(g,{startAngle:h||l,duration:f.max(f.abs(h-k)/g.speed*1e3,1)})),m.setup(),m.play())},renderPointer:function(a){var b=this,c=b.scale,d=c.ring,e=d.c,f=d.r,g=b.options,h=f*g.cap.size,i=new m(e.x-f,e.y-f,e.x+f,e.y+f),k=i.width()/2,l=i.center(),n=c.getSlotAngle(c.options.min),o=W-n;g.animation!==!1&&j(g.animation,{startAngle:0,center:l}),j(g,{rotation:[c.getSlotAngle(g.value)-n,l.x,l.y]});return[a.createPolyline([z((i.x1+i.x2)/2,i.y1+c.options.minorTicks.size,l.x,l.y,o),z(l.x-h/2,l.y,l.x,l.y,o),z(l.x+h/2,l.y,l.x,l.y,o)],!0,g),a.createCircle([l.x,l.y],h,{fill:g.cap.color||g.color})]},getViewElements:function(a){var b=this,c=b.options.shape,d=b.renderPointer(a);b.elements=d;return d}}),$=o.extend({init:function(a){var b=this,c=b.options;c.majorUnit=w(b.options.min,b.options.max),l.fn.init.call(b,a),b.options.minorUnit=b.options.minorUnit||b.options.majorUnit/10},options:{min:0,max:100,majorTicks:{size:15,align:S,color:H,width:N},minorTicks:{size:10,align:S,color:H,width:N},startAngle:-30,endAngle:210,labels:{position:S,padding:2}},reflow:function(a){var b=this,c=b.options,d=a.center(),e=f.min(a.height(),a.width())/2,g=b.ring||new k.Ring(d,e-c.majorTicks.size,e,c.startAngle,c.endAngle-c.startAngle);b.ring=g,b.box=g.getBBox(),b.arrangeLabels()},getSlotAngle:function(a){var b=this.options,c=b.startAngle,d=b.endAngle-c,e=b.min,f=b.max;return(a-e)/(f-e)*d+c},renderTicks:function(a){function h(d,e,f,g){var h=b.getTickAngles(d,e),i,j,k,l=g/e,m=h.length;for(i=0;i<m;i++){if(i%l===0)continue;k=d.point(h[i]),j=d.point(h[i],!0),c.push(a.createLine(j.x,j.y,k.x,k.y,{align:!1,stroke:f.color,strokeWidth:f.width}))}}var b=this,c=[],d=b.ring,e=d.clone(),f=b.options,g=f.minorTicks.size;h(d,f.majorUnit,f.majorTicks),f.labels.position==S?e.radius(e.r-g,!0):e.radius(e.ir+g),h(e,f.minorUnit,f.minorTicks,f.majorUnit);return c},arrangeLabels:function(){var a=this,b=a.options,c=a.ring.clone(),d=a.getTickAngles(c,b.majorUnit),e=a.labels,g=e.length,h=b.labels,i=h.padding,j=a.options.ringDistance=c.r*.05,k=a.options.ringSize=c.r*.1,l=b.ranges||[],n,o,p,q,r,s,t,u,v,w;h.position===S&&l.length&&(c.r-=k+j,c.ir-=k+j);for(t=0;t<g;t++)r=e[t],n=r.box.width()/2,o=r.box.height()/2,q=d[t],p=q*R,w=h.position===S,s=c.point(q,w),u=s.x+f.cos(p)*(n+i)*(w?1:-1),v=s.y+f.sin(p)*(o+i)*(w?1:-1),r.reflow(new m(u-n,v-o,u+n,v+o)),a.box.wrap(r.box)},getTickAngles:function(a,b){var c=this,d=c.options,e=d.max-d.min,f=a.angle,g=e/b,h=f/g,i=a.startAngle,j=i,k=[],l;for(l=0;l<g;l++)k.push(B(j,J)),j+=h;k.push(i+f);return k},renderRanges:function(a){function A(a,b,c){return{from:a,to:b,color:c}}var b=this,c=b.options,d=c.ranges||[],e=b.ring,g=[],h,i,j,k,l=d.length,m,n=c.rangePlaceholderColor,o=c.min,q=c.max,r,s,t=[],u,v=c.ringDistance,w=c.ringSize,x,z;t.push(A(o,q,n));if(l){c.labels.position===U?(j=e.ir-v,k=j-w):(j=e.r,k=j-w,e.r-=w+v,e.ir-=w+v);for(x=0;x<l;x++){m=d[x],h=y(m.from)?m.from:L,i=y(m.to)?m.to:K,m.from=f.max(f.min(i,h),o),m.to=f.min(f.max(i,h),q),s=t.length;for(r=0;r<s;r++){u=t[r];if(u.from<=m.from&&m.from<=u.to){t.push(A(m.from,m.to,m.color)),u.from<=m.to&&m.to<=u.to&&t.push(A(m.to,u.to,n)),u.to=m.from;break}}}for(x=0;x<t.length;x++)u=t[x],h=b.getSlotAngle(u.from),i=b.getSlotAngle(u.to),i-h!==0&&g.push(a.createRing(new p(e.c,k,j,h,i-h),{fill:u.color,fillOpacity:u.opacity,zIndex:-1}))}return g},getViewElements:function(a){var b=this,c=b.options,d=c.orientation===X,e=n.fn.getViewElements.call(b,a),f=b.getMinorTickPositions(),g;u(e,b.renderRanges(a)),u(e,b.renderTicks(a));return e}}),_=n.extend({init:function(a){n.fn.init.call(this,a),this.render()},options:{margin:{},background:"",border:{color:H,width:0},minorTicks:{align:S}},reflow:function(a){var b=this,c=b.options,d=b.scale,e=b.pointer,f;d.reflow(a),f=d.box.clone(),e.scale=d,e.reflow(),f.wrap(e.box),b.box=f,b.fitScale(a),b.alignScale(a)},alignScale:function(a){var b=this,c=b.box.center(),d=a.center(),e=c.x-d.x,f=c.y-d.y,g=b.scale,h=b.pointer,i=g.ring;g.ring.c.x-=e,g.ring.c.y-=f,g.reflow(a),h.reflow(),b.box=g.box.clone().wrap(h.box)},fitScale:function(a){var b=this,c=b.scale,d=c.ring,e=b.box,g=f.abs(b.getDiff(e,a)),h=B(g,J),i=B(-g,J),j,k,l,m;for(;;){if(h!=m){j=b.getPlotBox(h,a,d);if(0<=j&&j<=2)break}if(i!=m){l=b.getPlotBox(i,a,d);if(0<=l&&l<=2)break}j>0&&l>0?m=h*2:j<0&&l<0?m=i*2:m=B((h+i)/2||1,J),k=b.getPlotBox(m,a,d);if(0<=k&&k<=2)break;k>0?(i=m,l=k):(h=m,j=k)}},getPlotBox:function(a,b,c){var d=this,e=d.options,f=d.scale,g=d.pointer;c=c.clone(),c.r+=a,c.ir+=a,f.ring=c,f.reflow(b),g.scale=f,g.reflow(),d.box=f.box.clone().wrap(g.box);return d.getDiff(d.box,b)},getDiff:function(a,b){return f.min(b.width()-a.width(),b.height()-a.height())},render:function(){var a=this,b=a.options,c;c=a.scale=new $(b.scale),a.append(a.scale),a.pointer=new Z(c,b.pointer),a.append(a.pointer)}}),ba=o.extend({init:function(a){var b=this,c=b.options;c.majorUnit=w(b.options.min,b.options.max),a=j({},c,a),o.fn.init.call(b,0,1,a)},options:{min:0,max:50,minorUnit:1,majorTicks:{size:15,align:S,color:H,width:N,visible:!0},minorTicks:{size:10,align:S,color:H,width:N,visible:!0},line:{width:N},labels:{position:S,padding:2}},shouldAlign:function(){return!1},renderRanges:function(a){var b=this,c=b.options,d=c.ranges||[],e=c.vertical,g=[],h=b.parent,i=d.length,j,k,l,n,o,p,q=c.minorTicks.size/2;if(i)for(p=0;p<i;p++)j=d[p],n=y(j.from)?j.from:L,o=y(j.to)?j.to:K,j.from=f.min(n,o),j.to=f.max(n,o),e?(k=b.lineBox(),k.x1-=q,l=b.getSlot(j.from,j.to)):(k=b.getSlot(j.from,j.to),l=b.lineBox(),l.y2+=q),g.push(a.createRect(new m(k.x1,l.y1,k.x2,l.y2),{fill:j.color,fillOpacity:j.opacity}));return g},getViewElements:function(a){var b=this,c=o.fn.getViewElements.call(b,a);u(c,b.renderRanges(a));return c}}),bb=Y.extend({init:function(a,b){var c=this;Y.fn.init.call(c,a,b),c.options=j({size:c.getPointerSize()},c.options)},options:{shape:G,track:{border:{width:1},visible:!1},color:H,border:{width:1},opacity:1,margin:x(2.5),animation:{type:G},visible:!0},repaint:function(){var a=this,b=a.scale,d=a.options,e=a.element,f=e._animation;f&&f.abort(),d.animation===!1&&e?e.refresh(c.getElementById(d.id)):(d.animation=j({},d.animation,{endPosition:b.getSlot(b.options.min,d.value)}),d.shape===E?f=e._animation=new t(e,d.animation):f=e._animation=new s(e,d.animation),f.setup(),f.play())},reflow:function(a){var b=this,c=b.options,d=b.scale,e=d.getSlot(c.value),f=d.lineBox(),g=d.box,h=c.track.size||c.size,i=x(c.margin),j=c.size/2,k,l,n;d.options.vertical?l=new m(g.x2+i.left,f.y1,g.x2+i.left+h,f.y2):l=new m(f.x1,g.y1-i.bottom-h,f.x2,g.y1-i.bottom),b.trackBox=l,b.box=l.clone().pad(i)},renderPointer:function(a){var b=this,c=b.scale,d=b.options,e=y(d.border)?{stroke:d.border.width?d.border.color||d.color:"",strokeWidth:d.border.width,dashType:d.border.dashType}:{},f,g=j({fill:d.color,fillOpacity:d.opacity,animation:j(d.animation,{startPosition:c.getSlot(c.options.min,d.value),size:d.size,vertical:c.options.vertical}),id:d.id,zIndex:2,align:!1},e),h=b.getPointerShape(d.value);d.shape===E?(g.animation.type=F,f=a.createPolyline(h,!0,g)):f=a.createRect(h,g);return f},getPointerShape:function(a){var b=this,c=b.options,d=b.scale,e=d.getSlot(a,d.options.min),f=c.size,g=f/2,h=b.trackBox,i=h.center(),j;c.shape==E?d.options.vertical?j=[new A(h.x1,e.y1-g),new A(h.x1-f,e.y1),new A(h.x1,e.y1+g)]:j=[new A(e.x2-g,h.y2),new A(e.x2,h.y2+f),new A(e.x2+g,h.y2)]:d.options.vertical?j=new m(i.x-g,e.y1,i.x+g,e.y2):j=new m(e.x1,i.y-g,e.x2,i.y+g);return j},getPointerSize:function(a){var b=this,c=b.options,d=b.scale,e=d.options.majorTicks.size,f;c.shape===E?f=e*.6:f=e*.3;return B(f)},renderTrack:function(a){var b=this,c=b.scale,d=b.options,e=d.track,f=e.border||{};return a.createRect(b.trackBox,{fill:e.color,fillOpacity:e.opacity,stroke:f.width?f.color||e.color:"",strokeWidth:f.width,dashType:f.dashType,align:!1})},getViewElements:function(a){var b=this,c=b.options,d=[];c.visible&&(b.element=b.renderPointer(a),d.push(b.element),c.track.visible&&c.shape===G&&d.push(b.renderTrack(a))),u(d,Y.fn.getViewElements.call(b,a));return d}}),bc=n.extend({init:function(a){n.fn.init.call(this,a),this.render()},options:{margin:{},background:"",border:{color:H,width:0}},reflow:function(a){var b=this,c=b.scale,d=b.pointer;c.reflow(a),d.reflow(a),b.box=b.calculateBox(a),b.alignElements()},calculateBox:function(a){var b=this,c=b.options,d=b.scale,e=b.pointer,f=a.center(),g=e.box.clone().wrap(d.box),h;d.options.vertical?(h=g.width()/2,g=new m(f.x-h,a.y1,f.x+h,a.y2)):(h=g.height()/2,g=new m(a.x1,f.y-h,a.x2,f.y+h));return g},alignElements:function(){var a=this,b=a.scale,c=a.pointer,d=b.box;b.options.vertical?b.reflow(a.box):b.reflow(new m(d.x1,a.box.y1+c.box.height(),d.x2,a.box.y2)),c.reflow(a.box)},render:function(){var a=this,b=a.options,c;c=a.scale=new ba(b.scale),a.append(a.scale),a.pointer=new bb(c,b.pointer),a.append(a.pointer)},getViewElements:function(a){var b=this,c=b.options.plotArea,d=n.fn.getViewElements.call(b,a),e=c.border||{},f=[a.createRect(b.box,{fill:c.background,stroke:e.width?e.color:"",strokeWidth:e.width,dashType:e.dashType})];u(f,d);return f}}),bd=i.extend({init:function(a,b){var c=this,d,e,f,g=k.ui.themes.gauge||{},h=0;i.fn.init.call(c,a),c.wrapper=c.element,d=j({},c.options,b),f=d.theme,e=f?g[f]||g[f.toLowerCase()]:{},c.options=j({},e,d),c.element.addClass("k-gauge"),c.redraw()},options:{plotArea:{},name:"Gauge"},value:function(a){if(arguments.length===0)return this._pointers[0].value();this._pointers[0].value(a)},redraw:function(){var a=this,b=a.options,c=a.element,d=a._model=a._getModel(),e=a._plotArea=d._plotArea,f=k.ui.defaultView(),g;f&&(g=a._view=f.fromModel(d),c.css("position","relative"),a._viewElement=g.renderTo(c[0]))},svg:function(){var a=this._getModel(),b=k.SVGView.fromModel(a);return b.render()},_createModel:function(){var a=this,b=a.options,c=a._getSize();return new q(j({width:c.width,height:c.height,transitions:b.transitions},b.gaugeArea))},_getSize:function(){var a=this,b=a.element,c=b.width(),d=b.height();c||(c=O),d||(d=M);return{width:c,height:d}}}),be=bd.extend({init:function(a,b){var c=this;bd.fn.init.call(c,a,b),g.notify(c,k.ui)},options:{name:"RadialGauge",transitions:!0,gaugeArea:{background:""}},_getModel:function(){var a=this,b=a.options,c=a._createModel(),d;d=c._plotArea=new _(b),a._pointers=[d.pointer],c.append(d),c.reflow();return c}}),bf=bd.extend({init:function(a,b){var c=this;bd.fn.init.call(c,a,b),g.notify(c,k.ui)},options:{name:"LinearGauge",transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}},_getModel:function(){var a=this,b=a.options,c=a._createModel(),d;d=c._plotArea=new bc(b),a._pointers=[d.pointer],c.append(d),c.reflow();return c},_getSize:function(){var a=this,b=a.element,c=b.width(),d=b.height(),e=a.options.scale.vertical;c||(c=e?P:O),d||(d=e?M:Q);return{width:c,height:d}}}),bg=v(V,r),bh=v(F,t),bi=v(G,s);k.ui.plugin(be),k.ui.plugin(bf),j(k,{Gauge:bd,GaugePlotArea:_,RadialPointer:Z,LinearPointer:bb,LinearScale:ba,RadialScale:$,RadialPointerAnimationDecorator:bg,ArrowPointerAnimationDecorator:bh,BarIndicatorAnimationDecorator:bi})})(jQuery)